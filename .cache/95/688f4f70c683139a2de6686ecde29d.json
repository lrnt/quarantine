{"id":"HdJB","dependencies":[{"name":"/Users/benjaminshafii/git/quarantine/.babelrc","includedInParent":true,"mtime":1585218585140},{"name":"/Users/benjaminshafii/git/quarantine/package.json","includedInParent":true,"mtime":1586257658067},{"name":"simple-peer","loc":{"line":1,"column":23},"parent":"/Users/benjaminshafii/git/quarantine/test.js","resolved":"/Users/benjaminshafii/git/quarantine/node_modules/simple-peer/index.js"}],"generated":{"js":"\"use strict\";var e=o(require(\"simple-peer\"));function o(e){return e&&e.__esModule?e:{default:e}}function n(o){console.log(\"got media 2\");var n=\"#1\"===location.hash,t=new e.default({initiator:n,stream:n?o:void 0,trickle:!1});t.on(\"stream\",function(e){var o=document.querySelector(\"video\");\"srcObject\"in o?o.srcObject=e:o.src=window.URL.createObjectURL(e),console.log(\"gonna play\"),o.play()}),t.on(\"error\",function(e){return console.log(\"error\",e)}),t.on(\"signal\",function(e){console.log(\"SIGNAL\",JSON.stringify(e)),document.querySelector(\"#outgoing\").textContent=JSON.stringify(e)}),document.querySelector(\"form\").addEventListener(\"submit\",function(e){e.preventDefault(),t.signal(JSON.parse(document.querySelector(\"#incoming\").value))}),t.on(\"connect\",function(){console.log(\"CONNECT\"),t.send(\"whatever\"+Math.random())}),t.on(\"data\",function(e){console.log(\"data: \"+e)})}navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(n).catch(function(){});"},"sourceMaps":{"js":{"mappings":[{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":0}},{"source":"test.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"test.js","original":{"line":1,"column":0},"generated":{"line":1,"column":17}},{"source":"test.js","original":{"line":1,"column":0},"generated":{"line":1,"column":19}},{"source":"test.js","original":{"line":1,"column":0},"generated":{"line":1,"column":21}},{"source":"test.js","original":{"line":1,"column":0},"generated":{"line":1,"column":29}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":45}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":54}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":56}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":59}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":66}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":69}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":71}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":82}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":84}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":85}},{"source":"test.js","original":{"line":56,"column":0},"generated":{"line":1,"column":93}},{"source":"test.js","original":{"line":10,"column":0},"generated":{"line":1,"column":96}},{"source":"test.js","name":"gotMedia","original":{"line":10,"column":9},"generated":{"line":1,"column":105}},{"source":"test.js","name":"stream","original":{"line":10,"column":18},"generated":{"line":1,"column":107}},{"source":"test.js","name":"console","original":{"line":11,"column":2},"generated":{"line":1,"column":110}},{"source":"test.js","name":"log","original":{"line":11,"column":10},"generated":{"line":1,"column":118}},{"source":"test.js","original":{"line":11,"column":14},"generated":{"line":1,"column":122}},{"source":"test.js","name":"isInitiator","original":{"line":12,"column":8},"generated":{"line":1,"column":137}},{"source":"test.js","name":"isInitiator","original":{"line":12,"column":8},"generated":{"line":1,"column":141}},{"source":"test.js","original":{"line":12,"column":40},"generated":{"line":1,"column":143}},{"source":"test.js","name":"location","original":{"line":12,"column":22},"generated":{"line":1,"column":150}},{"source":"test.js","name":"hash","original":{"line":12,"column":31},"generated":{"line":1,"column":159}},{"source":"test.js","name":"p","original":{"line":13,"column":8},"generated":{"line":1,"column":164}},{"source":"test.js","original":{"line":13,"column":12},"generated":{"line":1,"column":166}},{"source":"test.js","name":"SimplePeer","original":{"line":13,"column":16},"generated":{"line":1,"column":170}},{"source":"test.js","original":{"line":13,"column":12},"generated":{"line":1,"column":172}},{"source":"test.js","original":{"line":13,"column":27},"generated":{"line":1,"column":180}},{"source":"test.js","name":"initiator","original":{"line":14,"column":4},"generated":{"line":1,"column":181}},{"source":"test.js","name":"isInitiator","original":{"line":14,"column":15},"generated":{"line":1,"column":191}},{"source":"test.js","name":"stream","original":{"line":15,"column":4},"generated":{"line":1,"column":193}},{"source":"test.js","name":"isInitiator","original":{"line":15,"column":12},"generated":{"line":1,"column":200}},{"source":"test.js","name":"stream","original":{"line":15,"column":26},"generated":{"line":1,"column":202}},{"source":"test.js","name":"undefined","original":{"line":15,"column":35},"generated":{"line":1,"column":209}},{"source":"test.js","name":"trickle","original":{"line":17,"column":4},"generated":{"line":1,"column":211}},{"source":"test.js","original":{"line":17,"column":13},"generated":{"line":1,"column":220}},{"source":"test.js","name":"p","original":{"line":20,"column":2},"generated":{"line":1,"column":224}},{"source":"test.js","name":"on","original":{"line":20,"column":4},"generated":{"line":1,"column":226}},{"source":"test.js","original":{"line":20,"column":7},"generated":{"line":1,"column":229}},{"source":"test.js","original":{"line":20,"column":17},"generated":{"line":1,"column":238}},{"source":"test.js","name":"stream","original":{"line":20,"column":17},"generated":{"line":1,"column":247}},{"source":"test.js","name":"video","original":{"line":22,"column":8},"generated":{"line":1,"column":250}},{"source":"test.js","name":"video","original":{"line":22,"column":8},"generated":{"line":1,"column":254}},{"source":"test.js","name":"document","original":{"line":22,"column":16},"generated":{"line":1,"column":256}},{"source":"test.js","name":"querySelector","original":{"line":22,"column":25},"generated":{"line":1,"column":265}},{"source":"test.js","original":{"line":22,"column":39},"generated":{"line":1,"column":279}},{"source":"test.js","original":{"line":24,"column":8},"generated":{"line":1,"column":288}},{"source":"test.js","name":"video","original":{"line":24,"column":23},"generated":{"line":1,"column":302}},{"source":"test.js","name":"video","original":{"line":25,"column":6},"generated":{"line":1,"column":304}},{"source":"test.js","name":"srcObject","original":{"line":25,"column":12},"generated":{"line":1,"column":306}},{"source":"test.js","name":"stream","original":{"line":25,"column":24},"generated":{"line":1,"column":316}},{"source":"test.js","name":"video","original":{"line":27,"column":6},"generated":{"line":1,"column":318}},{"source":"test.js","name":"src","original":{"line":27,"column":12},"generated":{"line":1,"column":320}},{"source":"test.js","name":"window","original":{"line":27,"column":18},"generated":{"line":1,"column":324}},{"source":"test.js","name":"URL","original":{"line":27,"column":25},"generated":{"line":1,"column":331}},{"source":"test.js","name":"createObjectURL","original":{"line":27,"column":29},"generated":{"line":1,"column":335}},{"source":"test.js","name":"stream","original":{"line":27,"column":45},"generated":{"line":1,"column":351}},{"source":"test.js","name":"console","original":{"line":30,"column":4},"generated":{"line":1,"column":354}},{"source":"test.js","name":"log","original":{"line":30,"column":12},"generated":{"line":1,"column":362}},{"source":"test.js","original":{"line":30,"column":16},"generated":{"line":1,"column":366}},{"source":"test.js","name":"video","original":{"line":31,"column":4},"generated":{"line":1,"column":380}},{"source":"test.js","name":"play","original":{"line":31,"column":10},"generated":{"line":1,"column":382}},{"source":"test.js","name":"p","original":{"line":33,"column":2},"generated":{"line":1,"column":391}},{"source":"test.js","name":"on","original":{"line":33,"column":4},"generated":{"line":1,"column":393}},{"source":"test.js","original":{"line":33,"column":7},"generated":{"line":1,"column":396}},{"source":"test.js","original":{"line":33,"column":16},"generated":{"line":1,"column":404}},{"source":"test.js","name":"err","original":{"line":33,"column":16},"generated":{"line":1,"column":413}},{"source":"test.js","name":"console","original":{"line":33,"column":23},"generated":{"line":1,"column":416}},{"source":"test.js","name":"console","original":{"line":33,"column":23},"generated":{"line":1,"column":423}},{"source":"test.js","name":"log","original":{"line":33,"column":31},"generated":{"line":1,"column":431}},{"source":"test.js","original":{"line":33,"column":35},"generated":{"line":1,"column":435}},{"source":"test.js","name":"err","original":{"line":33,"column":44},"generated":{"line":1,"column":443}},{"source":"test.js","name":"p","original":{"line":35,"column":2},"generated":{"line":1,"column":448}},{"source":"test.js","name":"on","original":{"line":35,"column":4},"generated":{"line":1,"column":450}},{"source":"test.js","original":{"line":35,"column":7},"generated":{"line":1,"column":453}},{"source":"test.js","original":{"line":35,"column":17},"generated":{"line":1,"column":462}},{"source":"test.js","name":"data","original":{"line":35,"column":17},"generated":{"line":1,"column":471}},{"source":"test.js","name":"console","original":{"line":36,"column":4},"generated":{"line":1,"column":474}},{"source":"test.js","name":"log","original":{"line":36,"column":12},"generated":{"line":1,"column":482}},{"source":"test.js","original":{"line":36,"column":16},"generated":{"line":1,"column":486}},{"source":"test.js","name":"JSON","original":{"line":36,"column":26},"generated":{"line":1,"column":495}},{"source":"test.js","name":"stringify","original":{"line":36,"column":31},"generated":{"line":1,"column":500}},{"source":"test.js","name":"data","original":{"line":36,"column":41},"generated":{"line":1,"column":510}},{"source":"test.js","name":"document","original":{"line":37,"column":4},"generated":{"line":1,"column":514}},{"source":"test.js","name":"querySelector","original":{"line":37,"column":13},"generated":{"line":1,"column":523}},{"source":"test.js","original":{"line":37,"column":27},"generated":{"line":1,"column":537}},{"source":"test.js","name":"textContent","original":{"line":37,"column":40},"generated":{"line":1,"column":550}},{"source":"test.js","name":"JSON","original":{"line":37,"column":54},"generated":{"line":1,"column":562}},{"source":"test.js","name":"stringify","original":{"line":37,"column":59},"generated":{"line":1,"column":567}},{"source":"test.js","name":"data","original":{"line":37,"column":69},"generated":{"line":1,"column":577}},{"source":"test.js","name":"document","original":{"line":40,"column":2},"generated":{"line":1,"column":582}},{"source":"test.js","name":"querySelector","original":{"line":40,"column":11},"generated":{"line":1,"column":591}},{"source":"test.js","original":{"line":40,"column":25},"generated":{"line":1,"column":605}},{"source":"test.js","name":"addEventListener","original":{"line":40,"column":33},"generated":{"line":1,"column":613}},{"source":"test.js","original":{"line":40,"column":50},"generated":{"line":1,"column":630}},{"source":"test.js","original":{"line":40,"column":60},"generated":{"line":1,"column":639}},{"source":"test.js","name":"ev","original":{"line":40,"column":60},"generated":{"line":1,"column":648}},{"source":"test.js","name":"ev","original":{"line":41,"column":4},"generated":{"line":1,"column":651}},{"source":"test.js","name":"preventDefault","original":{"line":41,"column":7},"generated":{"line":1,"column":653}},{"source":"test.js","name":"p","original":{"line":42,"column":4},"generated":{"line":1,"column":670}},{"source":"test.js","name":"signal","original":{"line":42,"column":6},"generated":{"line":1,"column":672}},{"source":"test.js","name":"JSON","original":{"line":42,"column":13},"generated":{"line":1,"column":679}},{"source":"test.js","name":"parse","original":{"line":42,"column":18},"generated":{"line":1,"column":684}},{"source":"test.js","name":"document","original":{"line":42,"column":24},"generated":{"line":1,"column":690}},{"source":"test.js","name":"querySelector","original":{"line":42,"column":33},"generated":{"line":1,"column":699}},{"source":"test.js","original":{"line":42,"column":47},"generated":{"line":1,"column":713}},{"source":"test.js","name":"value","original":{"line":42,"column":60},"generated":{"line":1,"column":726}},{"source":"test.js","name":"p","original":{"line":45,"column":2},"generated":{"line":1,"column":736}},{"source":"test.js","name":"on","original":{"line":45,"column":4},"generated":{"line":1,"column":738}},{"source":"test.js","original":{"line":45,"column":7},"generated":{"line":1,"column":741}},{"source":"test.js","original":{"line":45,"column":18},"generated":{"line":1,"column":751}},{"source":"test.js","name":"console","original":{"line":46,"column":4},"generated":{"line":1,"column":762}},{"source":"test.js","name":"log","original":{"line":46,"column":12},"generated":{"line":1,"column":770}},{"source":"test.js","original":{"line":46,"column":16},"generated":{"line":1,"column":774}},{"source":"test.js","name":"p","original":{"line":47,"column":4},"generated":{"line":1,"column":785}},{"source":"test.js","name":"send","original":{"line":47,"column":6},"generated":{"line":1,"column":787}},{"source":"test.js","original":{"line":47,"column":11},"generated":{"line":1,"column":792}},{"source":"test.js","name":"Math","original":{"line":47,"column":24},"generated":{"line":1,"column":803}},{"source":"test.js","name":"random","original":{"line":47,"column":29},"generated":{"line":1,"column":808}},{"source":"test.js","name":"p","original":{"line":50,"column":2},"generated":{"line":1,"column":820}},{"source":"test.js","name":"on","original":{"line":50,"column":4},"generated":{"line":1,"column":822}},{"source":"test.js","original":{"line":50,"column":7},"generated":{"line":1,"column":825}},{"source":"test.js","original":{"line":50,"column":15},"generated":{"line":1,"column":832}},{"source":"test.js","name":"data","original":{"line":50,"column":15},"generated":{"line":1,"column":841}},{"source":"test.js","name":"console","original":{"line":51,"column":4},"generated":{"line":1,"column":844}},{"source":"test.js","name":"log","original":{"line":51,"column":12},"generated":{"line":1,"column":852}},{"source":"test.js","original":{"line":51,"column":16},"generated":{"line":1,"column":856}},{"source":"test.js","name":"data","original":{"line":51,"column":27},"generated":{"line":1,"column":865}},{"source":"test.js","name":"navigator","original":{"line":56,"column":0},"generated":{"line":1,"column":870}},{"source":"test.js","name":"mediaDevices","original":{"line":56,"column":10},"generated":{"line":1,"column":880}},{"source":"test.js","name":"getUserMedia","original":{"line":57,"column":3},"generated":{"line":1,"column":893}},{"source":"test.js","original":{"line":57,"column":16},"generated":{"line":1,"column":906}},{"source":"test.js","name":"video","original":{"line":58,"column":4},"generated":{"line":1,"column":907}},{"source":"test.js","original":{"line":58,"column":11},"generated":{"line":1,"column":914}},{"source":"test.js","name":"audio","original":{"line":59,"column":4},"generated":{"line":1,"column":916}},{"source":"test.js","original":{"line":59,"column":11},"generated":{"line":1,"column":923}},{"source":"test.js","name":"then","original":{"line":61,"column":3},"generated":{"line":1,"column":927}},{"source":"test.js","name":"gotMedia","original":{"line":61,"column":8},"generated":{"line":1,"column":932}},{"source":"test.js","name":"catch","original":{"line":62,"column":3},"generated":{"line":1,"column":935}},{"source":"test.js","original":{"line":62,"column":9},"generated":{"line":1,"column":941}}],"sources":{"test.js":"import SimplePeer from \"simple-peer\";\n\n/*\nVisit index.html#1 from one browser (the initiator) and index.html from another browser (the receiver).\n\nAn \"offer\" will be generated by the initiator. Paste this into the receiver's form and hit submit. The receiver generates an \"answer\". Paste this into the initiator's form and hit submit.\n\nNow you have a direct P2P connection between two browsers!\n*/\nfunction gotMedia(stream) {\n  console.log(\"got media 2\");\n  const isInitiator = location.hash === \"#1\";\n  const p = new SimplePeer({\n    initiator: isInitiator,\n    stream: isInitiator ? stream : undefined,\n\n    trickle: false\n  });\n\n  p.on(\"stream\", stream => {\n    // got remote video stream, now let's show it in a video tag\n    var video = document.querySelector(\"video\");\n\n    if (\"srcObject\" in video) {\n      video.srcObject = stream;\n    } else {\n      video.src = window.URL.createObjectURL(stream); // for older browsers\n    }\n\n    console.log(\"gonna play\");\n    video.play();\n  });\n  p.on(\"error\", err => console.log(\"error\", err));\n\n  p.on(\"signal\", data => {\n    console.log(\"SIGNAL\", JSON.stringify(data));\n    document.querySelector(\"#outgoing\").textContent = JSON.stringify(data);\n  });\n\n  document.querySelector(\"form\").addEventListener(\"submit\", ev => {\n    ev.preventDefault();\n    p.signal(JSON.parse(document.querySelector(\"#incoming\").value));\n  });\n\n  p.on(\"connect\", () => {\n    console.log(\"CONNECT\");\n    p.send(\"whatever\" + Math.random());\n  });\n\n  p.on(\"data\", data => {\n    console.log(\"data: \" + data);\n  });\n}\n\n// get video/voice stream\nnavigator.mediaDevices\n  .getUserMedia({\n    video: true,\n    audio: true\n  })\n  .then(gotMedia)\n  .catch(() => {});\n"},"lineCount":null}},"error":null,"hash":"c6ce1e5c5605293f93ab03f59b1abf42","cacheData":{"env":{}}}